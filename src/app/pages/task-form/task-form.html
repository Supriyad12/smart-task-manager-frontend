  <app-header></app-header>

  <app-loader *ngIf="loading"></app-loader>

<div class="task-form-container">



  <div class="task-card">
    <h2>{{ taskId ? 'Edit Task' : 'Add Task' }}</h2>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <form #taskForm="ngForm" (ngSubmit)="submit(taskForm)" class="form">

      <!-- Title -->
      <div class="form-group">
        <label for="title">Title</label>
        <input
          type="text"
          id="title"
          name="title"
          [(ngModel)]="task.title"
          required
          minlength="5"
          #title="ngModel"
          [class.invalid]="title.invalid && title.touched"
          placeholder="Enter task title"
        />
        <small *ngIf="title.invalid && title.touched">Title must be at least 5 characters</small>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="description">Description</label>
        <textarea
          id="description"
          name="description"
          [(ngModel)]="task.description"
          placeholder="Enter task description">
        </textarea>
      </div>

      <!-- Priority -->
      <div class="form-group">
        <label for="priority">Priority</label>
        <select
          id="priority"
          name="priority"
          [(ngModel)]="task.priority"
          required>
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
      </div>

      <!-- Status -->
      <div class="form-group">
        <label for="status">Status</label>
        <select
          id="status"
          name="status"
          [(ngModel)]="task.status"
          required>
          <option value="Pending">Pending</option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
      </div>

      <!-- Submit -->
      <button type="submit" [disabled]="loading || taskForm.invalid" class="submit-btn">
        {{ taskId ? 'Update Task' : 'Create Task' }}
      </button>

    </form>
  </div>

</div>
